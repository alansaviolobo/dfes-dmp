<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Global Variables -->
    <script>
        window.amche = {};
        window.amche.ENABLE_INTRO_CONTENT = false; // Set to true to enable intro content auto-loading
        window.amche.MAPBOXGL_ACCESS_TOKEN = 'pk.eyJ1IjoicGxhbmVtYWQiLCJhIjoiY2l3ZmNjNXVzMDAzZzJ0cDV6b2lkOG9odSJ9.eep6sUoBS0eMN4thZUWpyQ'; // Mapbox Token by OpenStreetMap India Community for amche.in
        window.amche.GOOGLE_ANALYTICS = 'G-FBVGZ4HJV0';
        window.amche.DOMAIN_URL = 'amche.in';
        window.amche.DEFAULT_ATLAS = '/config/index.atlas.json';
    </script>

    <title>amche.in - Interactive 3D Atlas</title>
    <link rel="canonical" href="https://amche.in" />
    <link rel="manifest" href="/manifest.json">

    <!-- Favicon -->
    <link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/assets/img/icon-192x192.png">

    <!--
    SEO and Social Media Meta Tags
    Customize this to ensure proper SEO for the application
     -->
    <meta name="keywords"
        content="community mapping, community atlas,  Goa maps, land use zones, cadastral maps, Goa construction sites, Goa coastal zones, CZMP, Survey of India, Goa terrain, Goa RDP, Goa hill slopes, interactive mapping, Goa community mapping, Goa land records, decentralized planning, masterplans, land records, land use zones, cadastral maps, construction sites, coastal zones, hill slopes, regional development plans, user contributed map annotations, human footprint, climate change, nasa data, worldview data" />

    <meta name="description"
        content="Explore and create various maps for free using this citizen maintained digital mapping resource. Made in Goa, for the world." />

    <!-- Open Graph Meta Tags for Social Media -->
    <meta property="og:title" content="amche.in - community map atlas" />
    <meta property="og:description" content="Explore free 3D maps from your local government and community. Run by citizen volunteers from Goa, India." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://amche.in" />
    <meta property="og:image" content="https://amche.in/assets/img/og_image.jpg" />
    <meta property="og:site_name" content="amche.in" />
    <meta property="og:locale" content="en_IN" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="amche.in - Interactive 3D Atlas" />
    <meta name="twitter:description" content="A customizable and interactive 3D map explorer with various map layers from Government and open datasets like OpenStreetMap project. View landuse plans, parcels, administrative boundaries, natural hazards, protected areas, regulatory boundaries, street map features and more." />
    <meta name="twitter:image" content="https://amche.in/assets/img/og_image.jpg" />

    <!-- Progressive Web App Meta Tags -->
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="amche.in">

    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" />

    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@600&display=swap">
    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://cdn.jsdelivr.net/npm/mapbox-gl@3.16.0/dist/mapbox-gl.min.css">
    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.19.1/cdn/themes/light.min.css">
    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="css/styles.css">
    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="css/layer-interactions.css">

    <!-- Application Scripts -->
    <script defer src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script><!-- Tailwind CSS via CDN -->
    <script defer src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script><!-- Add jQuery -->
    <script defer src="https://cdn.jsdelivr.net/npm/mapbox-gl@3.16.0/dist/mapbox-gl.min.js"></script><!-- Mapbox GL JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/marked@14.1.3/marked.min.js"></script><!-- Mapbox GL JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/@mapbox/search-js-web@1.0.0/dist/mapboxsearch.min.js"></script><!-- Mapbox Search JS -->
    <script defer type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.19.1/cdn/shoelace.min.js"></script><!-- Shoelace Components -->
    <script defer type="module" src="js/index.js"></script>
</head>

<body class="flex flex-col full-viewport-height">
    <!-- Header -->
    <header class="bg-gray-900 text-white p-4 flex justify-between items-center">
        <div class="flex items-center gap-4">
            <mapbox-search-box id="mapbox-search-box"></mapbox-search-box>
        </div>
        <div id="top-header" class="flex items-center gap-4"></div>
        </div>
    </header>

    <!-- Wrap main content in a container -->
    <div class="flex flex-grow relative h-full">
        <!-- Map Container -->
        <main class="flex-grow relative h-full">
            <div id="map" style="width: 100%; height: 100%;">
                <img src="/assets/img/loading.png" alt="Loading Image" style="max-width: 100%;max-height: 100%;margin:auto;"/>
            </div>
            <!-- Add drawer inside the map container -->
            <sl-drawer id="map-controls-drawer" label="Maps à¤¨à¤•à¤¾à¤¸à¥‹" placement="start" class="drawer-placement-start">
                <div slot="label" class="flex items-center gap-2">
                    <sl-icon name="globe" style="font-size: 16px;"></sl-icon>
                    Maps à¤¨à¤•à¤¾à¤¸à¥‹
                </div>
                <div id="map-layer-filter" class="sticky top-0 z-10 hidden">
                    <!-- Search and Atlas Filter in a single row -->
                    <div class="flex gap-2 items-stretch">
                        <div style="width: 60%; min-width: 0;">
                            <sl-input id="layer-search-input" placeholder="Search layers..." clearable class="w-full"
                                size="small">
                                <sl-icon slot="prefix" name="search"></sl-icon>
                            </sl-input>
                        </div>
                        <div style="width: 40%; min-width: 0;">
                            <button id="atlas-filter-select" class="atlas-selector-btn w-full">
                                <sl-icon name="globe" style="font-size: 14px; margin-right: 6px;"></sl-icon>
                                <span id="atlas-filter-text">All Atlases</span>
                            </button>
                        </div>
                    </div>

                    <div class="flex items-center justify-end gap-2 mt-2">
                        <label class="text-sm text-white">Hide inactive</label>
                        <sl-switch id="hide-inactive-switch" size="small"></sl-switch>
                    </div>
                </div>
                <div id="layer-controls-container" class="hidden"></div>
            </sl-drawer>

            <div id="edit-mode-control" style="display: none;"
                class="mapboxgl-ctrl mapboxgl-ctrl-group absolute bottom-10 right-0 z-10 bg-white rounded shadow-md mr-2">
                <button id="edit-mode-toggle"
                    class="px-2 py-1 text-sm flex items-center justify-center hover:bg-blue-500"
                    aria-label="Toggle Edit Mode" title="Toggle Edit Mode">
                    <span aria-hidden="true">ðŸ“Œ</span>
                </button>
            </div>
        </main>
    </div>
</body>

</html>