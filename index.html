<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Global Variables -->
    <script>
        window.amche = {};
        window.amche.ENABLE_INTRO_CONTENT = false; // Set to true to enable intro content auto-loading
        window.amche.MAPBOXGL_ACCESS_TOKEN = 'pk.eyJ1IjoicGxhbmVtYWQiLCJhIjoiY2l3ZmNjNXVzMDAzZzJ0cDV6b2lkOG9odSJ9.eep6sUoBS0eMN4thZUWpyQ'; // Mapbox Token by OpenStreetMap India Community for amche.in
        window.amche.GOOGLE_ANALYTICS = 'G-FBVGZ4HJV0';
        window.amche.DOMAIN_URL = 'amche.in';
        window.amche.DEFAULT_ATLAS = '/config/index.atlas.json';
        window.amche.LAYER_DEFAULTS = '/config/_defaults.json';
        window.amche.MAPBOX_MAP_OPTIONS = {
            container: 'map'
        };
    </script>

    <title>amche.in - Interactive 3D Atlas</title>
    <link rel="canonical" href="https://amche.in" />
    <link rel="manifest" href="/manifest.json">

    <!-- Favicon -->
    <link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/assets/img/icon-192x192.png">

    <!--
    SEO and Social Media Meta Tags
    Customize this to ensure proper SEO for the application
     -->
    <meta name="keywords" content="community mapping, community atlas,  Goa maps, land use zones, cadastral maps, Goa construction sites, Goa coastal zones, CZMP, Survey of India, Goa terrain, Goa RDP, Goa hill slopes, interactive mapping, Goa community mapping, Goa land records, decentralized planning, masterplans, land records, land use zones, cadastral maps, construction sites, coastal zones, hill slopes, regional development plans, user contributed map annotations, human footprint, climate change, nasa data, worldview data" />

    <meta name="description" content="Explore and create various maps for free using this citizen maintained digital mapping resource. Made in Goa, for the world." />

    <!-- Open Graph Meta Tags for Social Media -->
    <meta property="og:title" content="amche.in - community map atlas" />
    <meta property="og:description" content="Explore free 3D maps from your local government and community. Run by citizen volunteers from Goa, India." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://amche.in" />
    <meta property="og:image" content="https://amche.in/assets/img/og_image.jpg" />
    <meta property="og:site_name" content="amche.in" />
    <meta property="og:locale" content="en_IN" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="amche.in - Interactive 3D Atlas" />
    <meta name="twitter:description" content="A customizable and interactive 3D map explorer with various map layers from Government and open datasets like OpenStreetMap project. View landuse plans, parcels, administrative boundaries, natural hazards, protected areas, regulatory boundaries, street map features and more." />
    <meta name="twitter:image" content="https://amche.in/assets/img/og_image.jpg" />

    <!-- Progressive Web App Meta Tags -->
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="amche.in">

    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://cdn.jsdelivr.net" />

    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@600&display=swap">
    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://cdn.jsdelivr.net/npm/mapbox-gl@3.16.0/dist/mapbox-gl.min.css">
    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.19.1/cdn/themes/light.min.css">
    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="css/styles.css">
    <link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="css/layer-interactions.css">

    <!-- Application Scripts -->
    <script defer src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script><!-- Tailwind CSS via CDN -->
    <script defer src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script><!-- Add jQuery -->
    <script defer src="https://cdn.jsdelivr.net/npm/mapbox-gl@3.16.0/dist/mapbox-gl.min.js"></script><!-- Mapbox GL JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/marked@14.1.3/marked.min.js"></script><!-- Mapbox GL JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/@mapbox/search-js-web@1.0.0/dist/mapboxsearch.min.js"></script><!-- Mapbox Search JS -->
    <script defer type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.19.1/cdn/shoelace.min.js"></script><!-- Shoelace Components -->
    <script defer type="module" src="js/index.js"></script>
</head>

<body class="flex flex-col full-viewport-height">
    <div id="loading"
        style="width: 100%;height: 100%;color: white;margin: auto;display: flex;z-index: -9999;position: fixed;font-size: 32px;align-items: center;justify-content: center;background-color: rgba(0, 0, 0, 0.5);">
        Loading</div>
    <!-- Header -->
    <header class="bg-gray-900 text-white p-4 flex justify-between items-center">
        <div class="flex items-center gap-4">
            <mapbox-search-box id="mapbox-search-box"></mapbox-search-box>
        </div>
        <div id="top-header" class="flex items-center gap-4"></div>
        </div>
    </header>

    <!-- Wrap main content in a container -->
    <div class="flex flex-grow relative h-full">
        <!-- Map Container -->
        <main class="flex-grow relative h-full">
            <div id="map" style="width: 100%; height: 100%;"></div>
            <!-- Add drawer inside the map container -->
            <sl-drawer id="map-controls-drawer" label="Maps नकासो" placement="start" class="drawer-placement-start">
                <div slot="label" class="flex items-center gap-2">
                    <sl-icon name="globe" style="font-size: 16px;"></sl-icon>
                    Maps नकासो
                </div>
                <div id="map-layer-filter" class="sticky top-0 z-10 hidden">
                    <!-- Search Input -->
                    <div class="mb-3">
                        <sl-input id="layer-search-input" placeholder="Search layers..." clearable class="w-full"
                            size="small">
                            <sl-icon slot="prefix" name="search"></sl-icon>
                        </sl-input>
                    </div>

                    <!-- Filters Section -->
                    <div class="pt-3 border-t border-gray-700">
                        <div class="text-xs text-gray-400 mb-2 px-1">Filters</div>
                        <div class="flex flex-col gap-2">
                            <label class="flex items-center gap-2 text-sm text-white cursor-pointer">
                                <sl-checkbox id="filter-active-maps" size="small" checked></sl-checkbox>
                                <span>Active Maps</span>
                            </label>
                            <label class="flex items-center gap-2 text-sm text-white cursor-pointer">
                                <sl-checkbox id="filter-maps-in-view" size="small"></sl-checkbox>
                                <span>Maps in current view</span>
                            </label>
                            <div class="flex items-center gap-2 text-sm text-white mt-1">
                                <span class="text-gray-400">Atlas:</span>
                                <button id="atlas-filter-select" class="atlas-selector-btn flex-1">
                                    <sl-icon name="globe" style="font-size: 14px; margin-right: 6px;"></sl-icon>
                                    <span id="atlas-filter-text">All Atlases</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- New Layer Button -->
                    <div class="mt-3 pt-3 border-t border-gray-700">
                        <button id="new-layer-btn" class="w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm transition-colors">
                            <sl-icon name="plus-square" style="font-size: 14px;"></sl-icon>
                            <span>New Data Source</span>
                        </button>
                    </div>
                </div>
                <div id="layer-controls-container"></div>
            </sl-drawer>

        </main>
    </div>
</body>

</html>
